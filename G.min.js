(function(){function e(){this._callbacks=[]}function t(t){function o(e){return function(){i+=1;r[e]=Array.prototype.slice.call(arguments);if(i===s)n.done(r)}}var n=new e;var r=[];if(!t||!t.length){n.done(r);return n}var i=0;var s=t.length;for(var u=0;u<s;u++){t[u].then(o(u))}return n}function n(t,r){var i=new e;if(t.length===0){i.done.apply(i,r)}else{t[0].apply(null,r).then(function(){t.splice(0,1);n(t,arguments).then(function(){i.done.apply(i,arguments)})})}return i}function r(e){var t="";if(typeof e==="string"){t=e}else{var n=encodeURIComponent;for(var r in e){if(e.hasOwnProperty(r)){t+="&"+n(r)+"="+n(e[r])}}}return t}function i(){var e;if(window.XMLHttpRequest){e=new XMLHttpRequest}else if(window.ActiveXObject){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e}function s(t,n,s,f){function d(){c.abort();l.done(c,null)}var l=new e;var c=i();var h=r(s);s=s||{};f=f||{};headers=f.headers||{};f.headers=u(a.headers,headers);f.type=f.type||"json";if(!t)t="GET";if(t==="GET"&&h){n+="?"+h;h=null}c.open(t,n);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var p in f.headers){if(f.headers.hasOwnProperty(p)){c.setRequestHeader(p,f.headers[p])}}var v=a.ajaxTimeout;if(v){var m=setTimeout(d,v)}c.onreadystatechange=function(){if(v){clearTimeout(m)}if(c.readyState===4){var e=!c.status||(c.status<200||c.status>=300)&&c.status!==304;var t={};t=o(c,f.type);if(e)l.done(t,null);else l.done(null,t.response,t)}};c.send(h);return l}function o(e,t){xhr_parsed={};for(var n in e){xhr_parsed[n]=e[n]}if(e.responseText&&t==="json"){try{xhr_parsed.response=JSON.parse(xhr_parsed.responseText)}catch(r){}}else if(t==="xml"){xhr_parsed.response=xhr_parsed.responseXML}return xhr_parsed}function u(){var e={};for(var t=0;t<arguments.length;t++){for(var n in arguments[t]){if(hasOwnProperty.call(arguments[t],n)){e[n]=arguments[t][n]}}}return e}e.prototype.then=function(t,n){var r;if(this._is_done){r=t.apply(n,this.result)}else{r=new e;this._callbacks.push(function(){var e=t.apply(n,arguments);if(e&&typeof e.then==="function")e.then(r.done,r)})}return r};e.prototype.done=function(){this.result=arguments;this._is_done=true;for(var e=0;e<this._callbacks.length;e++){this._callbacks[e].apply(null,arguments)}this._callbacks=[]};var a={Promise:e,parallel:t,waterfall:n,ajax:s,headers:{},ajaxTimeout:0};window.G=a})();